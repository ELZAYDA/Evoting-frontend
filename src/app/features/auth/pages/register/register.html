<div class="auth-wrapper">
  <div class="auth-container">

    <!-- Right Side - Register Form -->
    <div class="form-section">
      <div class="form-card">
        
        <!-- Form Header -->
        <div class="form-header">
          <h2>Create Account</h2>
          <p>Join our secure voting community</p>
        </div>

        <!-- Response Messages -->
        <div *ngIf="message" 
             class="response-message" 
             [class]="'response-' + messageType">
          <div class="message-icon">
            <i *ngIf="messageType === 'success'" class="fas fa-check-circle"></i>
            <i *ngIf="messageType === 'error'" class="fas fa-exclamation-circle"></i>
          </div>
          <div class="message-content">
            <p>{{ message }}</p>
            <div *ngIf="messageType === 'success'" class="redirect-notice">
              <i class="fas fa-clock"></i>
              Redirecting to login in 2 seconds...
            </div>
          </div>
        </div>

        <!-- Registration Form -->
        <form [formGroup]="registerForm" 
              (ngSubmit)="onSubmit()" 
              class="auth-form"
              novalidate>

          <!-- Form Grid -->
          <div class="form-grid">
            <!-- Username -->
            <div class="input-group">
              <label for="userName" class="input-label">
                <i class="fas fa-user"></i>
                Username
              </label>
              <input 
                id="userName" 
                type="text" 
                formControlName="userName"
                class="form-input"
                [class.input-error]="hasError('userName', 'required') || hasError('userName', 'minlength') || hasError('userName', 'maxlength')"
                placeholder="Enter username (3-50 chars)">
              <div class="error-message" *ngIf="hasError('userName', 'required') || hasError('userName', 'minlength') || hasError('userName', 'maxlength')">
                <i class="fas fa-exclamation-circle"></i>
                {{ getErrorMessage('userName') }}
              </div>
            </div>

            <!-- Email -->
            <div class="input-group">
              <label for="email" class="input-label">
                <i class="fas fa-envelope"></i>
                Email Address
              </label>
              <input 
                id="email" 
                type="email" 
                formControlName="email"
                class="form-input"
                [class.input-error]="hasError('email', 'required') || hasError('email', 'email')"
                placeholder="example@email.com">
              <div class="error-message" *ngIf="hasError('email', 'required') || hasError('email', 'email')">
                <i class="fas fa-exclamation-circle"></i>
                {{ getErrorMessage('email') }}
              </div>
            </div>

            <!-- Full Name -->
            <div class="input-group">
              <label for="fullName" class="input-label">
                <i class="fas fa-id-card"></i>
                Full Name
              </label>
              <input 
                id="fullName" 
                type="text" 
                formControlName="fullName"
                class="form-input"
                [class.input-error]="hasError('fullName', 'required') || hasError('fullName', 'minlength') || hasError('fullName', 'maxlength')"
                placeholder="As appears on ID">
              <div class="error-message" *ngIf="hasError('fullName', 'required') || hasError('fullName', 'minlength') || hasError('fullName', 'maxlength')">
                <i class="fas fa-exclamation-circle"></i>
                {{ getErrorMessage('fullName') }}
              </div>
            </div>

            <!-- Password -->
            <div class="input-group">
              <label for="password" class="input-label">
                <i class="fas fa-key"></i>
                Password
              </label>
              <input 
                id="password" 
                type="password" 
                formControlName="password"
                class="form-input"
                [class.input-error]="hasError('password', 'required') || hasError('password', 'minlength')"
                placeholder="Password (min 6 characters)">
              
              <!-- Password Strength -->
              <div class="password-strength" *ngIf="registerForm.get('password')?.value && registerForm.get('password')?.touched">
                <div class="strength-indicator">
                  <div class="strength-bar" [class]="'strength-' + getPasswordStrength()"></div>
                </div>
                <span class="strength-text">{{ getPasswordStrengthText() }}</span>
              </div>
              
              <div class="error-message" *ngIf="hasError('password', 'required') || hasError('password', 'minlength')">
                <i class="fas fa-exclamation-circle"></i>
                {{ getErrorMessage('password') }}
              </div>
            </div>

            <!-- Confirm Password -->
            <div class="input-group">
              <label for="confirmPassword" class="input-label">
                <i class="fas fa-key"></i>
                Confirm Password
              </label>
              <input 
                id="confirmPassword" 
                type="password" 
                formControlName="confirmPassword"
                class="form-input"
                [class.input-error]="hasError('confirmPassword', 'required') || registerForm.errors?.['mismatch']"
                placeholder="Re-enter password">
              <div class="error-message" *ngIf="hasError('confirmPassword', 'required') || registerForm.errors?.['mismatch']">
                <i class="fas fa-exclamation-circle"></i>
                <span *ngIf="hasError('confirmPassword', 'required')">Confirm password is required</span>
                <span *ngIf="registerForm.errors?.['mismatch']">Passwords do not match</span>
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <button 
            type="submit" 
            class="submit-btn"
            [disabled]="isLoading || registerForm.invalid">
            <span *ngIf="!isLoading">
              <i class="fas fa-user-plus"></i>
              Create Account
            </span>
            <span *ngIf="isLoading" class="loading">
              <i class="fas fa-spinner fa-spin"></i>
              Creating Account...
            </span>
          </button>

        </form>

        <!-- Login Link -->
        <div class="auth-footer">
          <p>
            Already have an account? 
            <a routerLink="/auth/login" class="auth-link">
              Sign In
              <i class="fas fa-arrow-right"></i>
            </a>
          </p>
          <p class="terms">
            By creating an account, you agree to our 
            <a href="#" class="terms-link">Terms of Service</a> and 
            <a href="#" class="terms-link">Privacy Policy</a>
          </p>
        </div>

      </div>
    </div>

  </div>
</div>