<!-- view-election.component.html -->
<div class="view-election-page">
  <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-title">
        <button (click)="onBack()" class="back-btn">โ ุฑุฌูุน ูููุงุฆูุฉ</button>
        <h1>ุชูุงุตูู ุงูุงูุชุฎุงุจ</h1>
        <p class="page-description">ุนุฑุถ ุงููุนูููุงุช ุงููุงููุฉ ุนู ุงูุงูุชุฎุงุจ</p>
      </div>
      
      <div class="header-actions" *ngIf="election">
        <button (click)="onEdit()" class="btn btn-primary">
          โ๏ธ ุชุนุฏูู ุงูุงูุชุฎุงุจ
        </button>
        <button (click)="onDelete()" class="btn btn-danger">
          ๐๏ธ ุญุฐู ุงูุงูุชุฎุงุจ
        </button>
      </div>
    </div>
  </div>

  <!-- ูุญุชูู ุงูุตูุญุฉ -->
  <div class="content-section">
    <!-- ุญุงูุฉ ุงูุชุญููู -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="loading-spinner"></div>
      <p>ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงูุงูุชุฎุงุจ...</p>
    </div>

    <!-- ุฑุณุงูุฉ ุงูุฎุทุฃ -->
    <div *ngIf="errorMessage && !isLoading" class="error-state">
      <div class="error-icon">โ๏ธ</div>
      <h3>ูุดู ูู ุชุญููู ุงูุจูุงูุงุช</h3>
      <p>{{ errorMessage }}</p>
      <button (click)="retryLoading()" class="btn btn-primary">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
    </div>

    <!-- ุจูุงูุงุช ุงูุงูุชุฎุงุจ -->
    <div *ngIf="election && !isLoading" class="election-details">
      
      <!-- ุจุทุงูุฉ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ -->
      <div class="info-card">
        <div class="card-header">
          <h2>{{ election.electionName }}</h2>
          <span [class]="getStatusClass(election.status)" class="status-large">
            {{ getElectionStatus() }}
          </span>
        </div>
        
        <div class="card-body">
          <p class="election-description" *ngIf="election.description">
            {{ election.description }}
          </p>
          
          <div class="info-grid">
            <div class="info-item">
              <label>ุชุงุฑูุฎ ุงูุฅูุดุงุก:</label>
              <span>{{ formatDate(election.createdAt) }}</span>
            </div>
            <div class="info-item">
              <label>ุชุงุฑูุฎ ุงูุจุฏุก:</label>
              <span>{{ formatDate(election.startDate) }}</span>
            </div>
            <div class="info-item">
              <label>ุชุงุฑูุฎ ุงูุงูุชูุงุก:</label>
              <span>{{ formatDate(election.endDate) }}</span>
            </div>
            <div class="info-item">
              <label>ุนุฏุฏ ุงููุฑุดุญูู:</label>
              <span class="count-badge">{{ election.candidatesCount || 0 }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ุฅุญุตุงุฆูุงุช ุงูุงูุชุฎุงุจ -->
      <div class="stats-grid" *ngIf="isElectionActive() || isElectionCompleted()">
        <div class="stat-card">
          <div class="stat-icon">๐ณ๏ธ</div>
          <div class="stat-info">
            <h3>{{ electionStats.totalVotes }}</h3>
            <p>ุฅุฌูุงูู ุงูุฃุตูุงุช</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">๐</div>
          <div class="stat-info">
            <h3>{{ electionStats.votingPercentage }}%</h3>
            <p>ูุณุจุฉ ุงููุดุงุฑูุฉ</p>
          </div>
        </div>
        
        <div class="stat-card" *ngIf="electionStats.leadingCandidate">
          <div class="stat-icon">๐</div>
          <div class="stat-info">
            <h3>{{ electionStats.leadingCandidate }}</h3>
            <p>ุงููุชุตุฏุฑ ุญุงููุงู</p>
          </div>
        </div>
      </div>

      <!-- ุญุงูุฉ ุงูุงูุชุฎุงุจ -->
      <div class="status-card">
        <h3>ุญุงูุฉ ุงูุงูุชุฎุงุจ ุงูุญุงููุฉ</h3>
        <div class="status-info">
          <div class="status-item" [class.active]="isElectionUpcoming()">
            <span class="status-dot"></span>
            <span>ูุงุฏู</span>
          </div>
          <div class="status-item" [class.active]="isElectionActive()">
            <span class="status-dot"></span>
            <span>ุฌุงุฑู</span>
          </div>
          <div class="status-item" [class.active]="isElectionCompleted()">
            <span class="status-dot"></span>
            <span>ููุชูู</span>
          </div>
          <div class="status-item" [class.active]="!election.status">
            <span class="status-dot"></span>
            <span>ูุนุทู</span>
          </div>
        </div>
      </div>

      <!-- ูุนูููุงุช ุฅุถุงููุฉ -->
      <div class="additional-info">
        <h3>ูุนูููุงุช ุฅุถุงููุฉ</h3>
        <div class="info-list">
          <div class="info-row">
            <span class="info-label">ูุนุฑู ุงูุงูุชุฎุงุจ:</span>
            <span class="info-value">{{ election.electionId }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">ุงูุญุงูุฉ ุงููุนููุฉ:</span>
            <span class="info-value">{{ getStatusText(election.status) }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">ูุฏุฉ ุงูุงูุชุฎุงุจ:</span>
            <span class="info-value">{{ calculateElectionDuration() }} ููู</span>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>