<!-- results-page.component.html -->
<div class="results-page">
  <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
  <div class="page-header">
    <div class="header-content">
      <h1>ูุชุงุฆุฌ ุงูุงูุชุฎุงุจุงุช</h1>
      <p class="page-description">ุนุฑุถ ุงููุชุงุฆุฌ ูุงูุฅุญุตุงุฆูุงุช ุจุนุฏ ุงูุชูุงุก ุงูุงูุชุฎุงุจุงุช</p>
    </div>
  </div>

  <!-- ููุชุฑ ุงูุงูุชุฎุงุจุงุช -->
  <div class="filters-section">
    <div class="filter-group">
      <label for="electionFilter">ุงุฎุชุฑ ุงูุงูุชุฎุงุจ:</label>
      <select 
        id="electionFilter"
        [(ngModel)]="electionFilter" 
        (change)="onElectionChange()"
        class="filter-select"
        [disabled]="isLoadingElections">
        <option value="">ุงุฎุชุฑ ุงูุงูุชุฎุงุจ...</option>
        <option *ngFor="let election of elections" [value]="election.electionId">
          {{ election.electionName }}
        </option>
      </select>
      <div *ngIf="isLoadingElections" class="loading-text">ุฌุงุฑู ุชุญููู ุงูุงูุชุฎุงุจุงุช...</div>
    </div>
  </div>

  <!-- ุฑุณุงูุฉ ุงูุฎุทุฃ -->
  <div *ngIf="errorMessage" class="error-message">
    <div class="error-icon">โ๏ธ</div>
    <p>{{ errorMessage }}</p>
    <button *ngIf="electionId" (click)="retryLoading()" class="btn btn-retry">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
  </div>

  <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
  <div *ngIf="electionId && !isLoading" class="content-section">
    
    <!-- ุงูุชุจููุจุงุช -->
    <div class="tabs-container">
      <div class="tabs">
        <button 
          [class.active]="activeTab === 'results'" 
          (click)="setActiveTab('results')"
          class="tab-btn">
          ๐ ุงููุชุงุฆุฌ ุงููุงููุฉ
        </button>
        <button 
          [class.active]="activeTab === 'winner'" 
          (click)="setActiveTab('winner')"
          class="tab-btn">
          ๐ ุงููุงุฆุฒ
        </button>
        <button 
          [class.active]="activeTab === 'statistics'" 
          (click)="setActiveTab('statistics')"
          class="tab-btn">
          ๐ ุงูุฅุญุตุงุฆูุงุช
        </button>
      </div>
    </div>

    <!-- ุชุจููุจ ุงููุชุงุฆุฌ ุงููุงููุฉ -->
    <div *ngIf="activeTab === 'results' && results" class="tab-content">
      
      <!-- ูุนูููุงุช ุงูุงูุชุฎุงุจ -->
      <div class="election-info-card">
        <h2>{{ results.electionTitle }}</h2>
        <div class="election-stats">
          <div class="stat">
            <span class="stat-value">{{ results.totalVotes }}</span>
            <span class="stat-label">ุฅุฌูุงูู ุงูุฃุตูุงุช</span>
          </div>
          <div class="stat">
            <span class="stat-value">{{ results.totalCandidates }}</span>
            <span class="stat-label">ุนุฏุฏ ุงููุฑุดุญูู</span>
          </div>
          <div class="stat">
            <span class="stat-value">{{ formatDate(results.generatedAt) }}</span>
            <span class="stat-label">ุขุฎุฑ ุชุญุฏูุซ</span>
          </div>
        </div>
      </div>

      <!-- ุฌุฏูู ุงููุชุงุฆุฌ -->
      <div class="results-table-section">
        <h3>ุงููุชุงุฆุฌ ุงูุชูุตูููุฉ</h3>
        <div class="table-container">
          <table class="results-table">
            <thead>
              <tr>
                <th width="80">ุงูุชุฑุชูุจ</th>
                <th>ุงููุฑุดุญ</th>
                <th width="120">ุงูุญุฒุจ</th>
                <th width="120">ุนุฏุฏ ุงูุฃุตูุงุช</th>
                <th width="100">ุงููุณุจุฉ</th>
                <th width="120">ุดุฑูุท ุงูุชูุฏู</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let candidate of results.candidates" [class]="getMedalClass(candidate.rank)">
                <td>
                  <div class="rank-cell">
                    <span class="medal-icon">{{ getMedalIcon(candidate.rank) }}</span>
                    <span class="rank-number">{{ candidate.rank }}</span>
                  </div>
                </td>
                <td>
                  <strong>{{ candidate.candidateName }}</strong>
                </td>
                <td>
                  <span class="party-badge">{{ candidate.party || 'ูุณุชูู' }}</span>
                </td>
                <td>
                  <span class="votes-count">{{ candidate.totalVotes }}</span>
                </td>
                <td>
                  <span class="percentage">{{ candidate.percentage }}%</span>
                </td>
                <td>
                  <div class="progress-bar">
                    <div 
                      class="progress-fill" 
                      [style.width.%]="candidate.percentage">
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>

    <!-- ุชุจููุจ ุงููุงุฆุฒ -->
    <div *ngIf="activeTab === 'winner' && winner" class="tab-content">
      
      <div class="winner-card">
        <div class="winner-header">
          <div class="winner-icon">๐</div>
          <h2>ุงููุงุฆุฒ ุจุงูุงูุชุฎุงุจ</h2>
        </div>
        
        <div class="winner-info">
          <div class="winner-name">{{ winner.winnerName }}</div>
          <div class="winner-party">{{ winner.winnerParty }}</div>
          <div class="winner-stats">
            <div class="winner-stat">
              <span class="stat-label">ุนุฏุฏ ุงูุฃุตูุงุช:</span>
              <span class="stat-value">{{ winner.totalVotes }}</span>
            </div>
            <div class="winner-stat">
              <span class="stat-label">ุงููุณุจุฉ:</span>
              <span class="stat-value">{{ winner.percentage }}%</span>
            </div>
            <div class="winner-stat" *ngIf="winner.margin > 0">
              <span class="stat-label">ุงููุฑู ุนู ุงูุซุงูู:</span>
              <span class="stat-value">{{ winner.margin }} ุตูุช</span>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- ุชุจููุจ ุงูุฅุญุตุงุฆูุงุช -->
    <div *ngIf="activeTab === 'statistics' && statistics" class="tab-content">
      
      <div class="statistics-grid">
        <div class="stat-card">
          <div class="stat-icon">๐</div>
          <div class="stat-info">
            <h3>{{ statistics.totalVotes }}</h3>
            <p>ุฅุฌูุงูู ุงูุฃุตูุงุช</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">๐ฅ</div>
          <div class="stat-info">
            <h3>{{ statistics.totalCandidates }}</h3>
            <p>ุนุฏุฏ ุงููุฑุดุญูู</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">๐ฏ</div>
          <div class="stat-info">
            <h3>{{ statistics.votingRate }}%</h3>
            <p>ูุณุจุฉ ุงููุดุงุฑูุฉ</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon" [class.close-race]="statistics.closeRace">โก</div>
          <div class="stat-info">
            <h3>{{ statistics.closeRace ? 'ูุนู' : 'ูุง' }}</h3>
            <p>ุณุจุงู ูุชูุงุฑุจ</p>
          </div>
        </div>
      </div>

      <div class="additional-stats">
        <h3>ูุนูููุงุช ุฅุถุงููุฉ</h3>
        <div class="stats-list">
          <div class="stat-item">
            <span class="stat-label">ุงููุงุฆุฒ:</span>
            <span class="stat-value">{{ statistics.winner }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ุขุฎุฑ ุชุญุฏูุซ:</span>
            <span class="stat-value">{{ formatDate(statistics.generatedAt) }}</span>
          </div>
        </div>
      </div>

    </div>

  </div>

  <!-- ุญุงูุฉ ุงูุชุญููู -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>ุฌุงุฑู ุชุญููู ุงููุชุงุฆุฌ...</p>
  </div>

  <!-- ุญุงูุฉ ุนุฏู ุงุฎุชูุงุฑ ุงูุชุฎุงุจ -->
  <div *ngIf="!electionId && !isLoading" class="empty-state">
    <div class="empty-icon">๐</div>
    <h3>ุงุฎุชุฑ ุงูุงูุชุฎุงุจ</h3>
    <p>ูุฑุฌู ุงุฎุชูุงุฑ ุงูุงูุชุฎุงุจ ูุนุฑุถ ุงููุชุงุฆุฌ</p>
  </div>

</div>